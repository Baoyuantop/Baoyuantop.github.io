<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://baoyuantop.github.io</id>
    <title>Baoyuan&apos;s Blog</title>
    <updated>2021-07-31T09:07:12.328Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://baoyuantop.github.io"/>
    <link rel="self" href="https://baoyuantop.github.io/atom.xml"/>
    <logo>https://baoyuantop.github.io/images/avatar.png</logo>
    <icon>https://baoyuantop.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, Baoyuan&apos;s Blog</rights>
    <entry>
        <title type="html"><![CDATA[Rust æ¡ä»¶ä¸å¾ªç¯]]></title>
        <id>https://baoyuantop.github.io/post/rust-tiao-jian-yu-xun-huan/</id>
        <link href="https://baoyuantop.github.io/post/rust-tiao-jian-yu-xun-huan/">
        </link>
        <updated>2021-07-26T14:06:53.000Z</updated>
        <content type="html"><![CDATA[<h2 id="æ¡ä»¶æ‰§è¡Œ">æ¡ä»¶æ‰§è¡Œ</h2>
<pre><code class="language-rust">let x = 5;
if x == 5 {
    println!(&quot;x is 5&quot;); // done
}
</code></pre>
<p>if è¡¨è¾¾å¼ï¼Œç›¸å½“äº JavaScript çš„ä¸‰å…ƒè¡¨è¾¾å¼ï¼š</p>
<pre><code class="language-rust">let x_odd = if x % 2 == 0 { &quot;odd&quot; } else { &quot;even&quot; };
println!(&quot;x_odd is {}&quot;, x_odd); // x_odd is even
</code></pre>
<h2 id="å¤šä¸ªæ¡ä»¶-ifelse-if">å¤šä¸ªæ¡ä»¶ (if/else if)</h2>
<pre><code class="language-rust">let x = 2;
let y = 5;
if x &gt; y {
    println!(&quot;x is greater than  y&quot;);
} else if x &lt; y {
    println!(&quot;x is less than y&quot;); // done 
} else {
    println!(&quot;x is equal to y&quot;);
}
</code></pre>
<h2 id="å¾ªç¯">å¾ªç¯</h2>
<h3 id="ä½¿ç”¨-loop-å¾ªç¯">ä½¿ç”¨ <code>loop</code> å¾ªç¯</h3>
<pre><code class="language-rust">loop {
    if count == 10 {
        break;
    }
    count += 1;
    println!(&quot;count is {}&quot;, count);
}
</code></pre>
<p>loop ä¼šå¾ªç¯æ‰§è¡ŒæŸä¸ªè¯­æ³•å¿«ï¼Œç›´åˆ°ä½¿ç”¨ <code>break</code> åœæ­¢å¾ªç¯æˆ–æ˜¯æ‰‹åŠ¨åœæ­¢ç¨‹åºã€‚<br>
ä¸Šè¿°æ‰“å°å‡ºï¼š</p>
<pre><code class="language-rust">count is 1
count is 2
count is 3
count is 4
count is 5
count is 6
count is 7
count is 8
count is 9
count is 10
</code></pre>
<p>ä»å¾ªç¯ä¸­è¿”å›æŸä¸ªå€¼ï¼š</p>
<pre><code class="language-rust">let result = loop {
    if count == 15 {
        // returning a value with break statement
        break count * 20;
    }
    count += 1;
    println!(&quot;count is {}&quot;, count); // 300
};
</code></pre>
<h3 id="ä½¿ç”¨-while-å¾ªç¯">ä½¿ç”¨ while å¾ªç¯</h3>
<p>ä¸ loop å¾ªç¯ä¸åŒçš„æ˜¯ï¼Œwhile å¾ªç¯ä¸­ break ä¸èƒ½è¿”å›å€¼ã€‚</p>
<pre><code class="language-rust">let mut count = 0;
let letters: [char; 5] = ['a', 'b', 'c', 'd', 'e'];

while count &lt; letters.len() {
    println!(&quot;letter [{}] is {}&quot;, count, letters[count]);
    count += 1;
}
</code></pre>
<p>ç»“æœ:</p>
<pre><code class="language-rust">letter[0] is a
letter[1] is b
letter[2] is c
letter[3] is d
letter[4] is e
</code></pre>
<h3 id="for-å¾ªç¯">for å¾ªç¯</h3>
<p>ä½¿ç”¨ <code>iter()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚<br>
è¿­ä»£å™¨å¯¹é›†åˆç±»å…ƒç´ å®ç°è¿­ä»£ï¼Œä½¿ç”¨ <code>next()</code> æ–¹æ³•è¿”å›ä¸‹ä¸€ä¸ªè¿­ä»£ã€‚</p>
<pre><code class="language-rust">for item in message.iter() {
    println!(&quot;current item is  {}&quot;, item);
}
</code></pre>
<p>ä½¿ç”¨ <code>enumerate()</code> è¿”å›ä¸€ä¸ªå…ƒç»„ï¼ŒåŒ…å«å½“å‰è¿­ä»£çš„å…ƒç´ çš„ç´¢å¼•å’Œå¼•ç”¨ã€‚æ¨èå¯¹è¯¥å…ƒç»„è¿›è¡Œè§£æ„ã€‚</p>
<pre><code class="language-rust">for (index, &amp;item) in message.iter().enumerate() {
    println!(&quot;item {} is {}&quot;, index, item);
    if item == 'e' {
        break;
    }
}
</code></pre>
<p>å› ä¸ºè¿”å›çš„å…ƒç»„ä¸­æ˜¯å…ƒç´ çš„å¼•ç”¨ï¼Œä½¿ç”¨ <code>&amp;item</code> å¯ä»¥å€Ÿç”¨å˜é‡è€Œä¸å–å¾—æ‰€æœ‰æƒã€‚åœ¨å¾ªç¯ä¸­å¯ä»¥è®¿é—®è¯¥å˜é‡ã€‚</p>
<p>è¿­ä»£ä¸€ç»„æ•°å­—ï¼š</p>
<pre><code class="language-rust">for number in 0..5 {
    println!(&quot;number is {}&quot;, number); 
}
</code></pre>
<pre><code class="language-rust">number is 0
number is 1
number is 2
number is 3
number is 4
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Update state on unmounted component]]></title>
        <id>https://baoyuantop.github.io/post/update-state-on-unmounted-component/</id>
        <link href="https://baoyuantop.github.io/post/update-state-on-unmounted-component/">
        </link>
        <updated>2021-07-24T03:47:59.000Z</updated>
        <content type="html"><![CDATA[<p>å†™è¿‡ <code>React</code> çš„ä¸€å®šä¼šæœ‰é‡åˆ°è¿‡è¿™ä¸ªé”™è¯¯ï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://z3.ax1x.com/2021/07/31/Wjf7Hs.png" alt="é”™è¯¯ä¿¡æ¯" loading="lazy"></figure>
<p>å‡†ç¡®æ¥è¯´è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šï¼Œå› ä¸ºå®ƒçœ‹èµ·æ¥å¹¶ä¸ä¼šå½±å“ç¨‹åºçš„æ­£å¸¸è¿è¡Œï¼Œå¦‚æœä¸å»å¤„ç†çš„è¯ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆä¸¥é‡çš„åæœï¼Œæ‰€ä»¥å¤§å¤šæ•°äººå°±ä¼šé€‰æ‹©è§†è€Œä¸è§... ğŸ˜‚</p>
<p>ä½†æ˜¯è¦çœŸé—®é¢˜æ¥ä¸ºå•¥ä¼šè¿™æ ·ï¼Œä¸ä»”ç»†ç ”ç©¶ä¸€ä¸‹ä¸æ˜¯å¾ˆå¥½æƒ³æ˜ç™½ï¼Œä¸‹é¢å°±æ¥æ¢è®¨ä¸‹è¿™ä¸ªé”™è¯¯æç¤ºçš„æ ¹æœ¬åŸå› åœ¨å“ªã€‚</p>
<p>é¦–å…ˆçœ‹ä¸€ä¸‹é”™è¯¯çš„å­—é¢æ„æ€ï¼š</p>
<p>ä¸èƒ½æ›´æ–° React çš„ state åœ¨ä¸€ä¸ªè¿˜æ²¡æœ‰æŒ‚è½½çš„ç»„ä»¶ä¸Šã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªç©ºæ“ä½œï¼Œä½†å®ƒè¡¨æ˜æ‚¨çš„åº”ç”¨ç¨‹åºä¸­å­˜åœ¨å†…å­˜æ³„æ¼ã€‚</p>
<p>è¦ä¿®å¤ï¼Œè¯·å–æ¶ˆ useEffect æ¸…ç†å‡½æ•°ä¸­çš„æ‰€æœ‰è®¢é˜…å’Œå¼‚æ­¥ä»»åŠ¡ã€‚</p>
<p>æ„æ€å¤§æ¦‚æ˜¯è¯´é—®é¢˜å‡ºåœ¨äº† <code>useEffect</code> ä¸Šï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆå°è¯•ç€å¤ç°ä¸€ä¸‹è¿™ä¸ªé”™è¯¯ã€‚</p>
<p>æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„åº”ç”¨ï¼Œé€šè¿‡ä¸€ä¸ª select ç»„ä»¶é€‰æ‹©ä¸åŒçš„åŠ¨ç‰©åç§°ï¼Œç„¶åæ ¹æ®é€‰æ‹©çš„åå­—è¯»å–ç›¸åº”çš„æ•°æ®å¹¶æ˜¾ç¤ºåœ¨ä¸‹æ–¹ã€‚</p>
<p>Pets ç»„ä»¶ï¼š</p>
<pre><code class="language-js">const Pets: React.FC = () =&gt; {
  const [pets, setPets] = useState('');
  const [petsData, setPetsData] = useState({});
  const [loading, setLoading] = useState(false);

  const handleChange = ({ target }) =&gt; {
    setLoading(true);
    setPets(target.value);
  };

  useEffect(() =&gt; {
    if (pets) {
      getPets(pets).then(res =&gt; {
        setLoading(false);
        setPetsData(res);
      });
    }
  }, [pets]);

  return (
    &lt;div&gt;
      &lt;select name=&quot;pets&quot; id=&quot;pets&quot; onChange={handleChange}&gt;
        &lt;option value=&quot;&quot;&gt;Select a pet&lt;/option&gt;
        &lt;option value=&quot;cats&quot;&gt;Cats&lt;/option&gt;
        &lt;option value=&quot;dogs&quot;&gt;Dogs&lt;/option&gt;
      &lt;/select&gt;
      {loading &amp;&amp; &lt;Loading /&gt;}
      {petsData &amp;&amp; &lt;PetsCard petsData={petsData} /&gt;}
    &lt;/div&gt;
  );
};
</code></pre>
<p>æˆ‘ä»¬ä½¿ç”¨äº† select ç»„ä»¶é€‰æ‹© <code>cats</code> æˆ–æ˜¯ <code>dogs</code>ï¼Œå½“é€‰æ‹©æ”¹å˜çš„æ—¶å€™æˆ‘ä»¬è®¾ç½®å½“å‰çš„ <code>pets</code> çŠ¶æ€ä¸ºé€‰æ‹©çš„å€¼ï¼Œç„¶åä¼šè§¦å‘ useEffect æ›´æ–°å¯¹åº”çš„å†…å®¹å¹¶æ˜¾ç¤ºã€‚</p>
<p>å…¶ä¸­ <code>PetsCard</code> ç»„ä»¶æ¥å—åŠ¨ç‰©çš„æ•°æ®å¹¶æ¸²æŸ“ï¼š</p>
<pre><code class="language-js">const PetsCard = ({ petsData }) =&gt; {
  console.log(petsData);
  return (
    &lt;div&gt;
      &lt;p&gt;{petsData.name}&lt;/p&gt;
      &lt;p&gt;{petsData.avatar}&lt;/p&gt;
    &lt;/div&gt;
  );
};
</code></pre>
<p>ä½¿ç”¨ <code>Loading</code> ç»„ä»¶å±•ç¤ºåŠ è½½ä¸­çš„çŠ¶æ€:</p>
<pre><code class="language-js">const Loading: React.FC = () =&gt; {
  return &lt;p&gt;Loading...&lt;/p&gt;;
};
</code></pre>
<p>æ•°æ®éƒ¨åˆ†æˆ‘ä»¬é€‰æ‹©æœ¬åœ°æ¨¡æ‹Ÿï¼š</p>
<pre><code class="language-js">const petsData = {
  dogs: {
    name: 'dogs',
    avatar: 'ğŸ¶'
  },
  cats: {
    name: 'cats',
    avatar: 'ğŸ±'
  }
};

export const getPets = (type: 'dogs' | 'cats') =&gt; {
  return new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; {
      resolve(petsData[type]);
    }, 1000);
  });
};
</code></pre>
<p>ä½¿ç”¨ <code>setTimeout</code> æ¨¡æ‹Ÿè¾ƒæ…¢çš„ç½‘ç»œè¯·æ±‚ã€‚</p>
<p>æœ€åå°†ä»–ä»¬æŒ‚è½½èµ·æ¥ï¼š</p>
<pre><code class="language-js">const App: React.FC = () =&gt; {
  return (
    &lt;div&gt;
      &lt;Pets /&gt;
    &lt;/div&gt;
  );
};

render(&lt;App /&gt;, document.getElementById('root'));
</code></pre>
<p>è¿è¡Œèµ·æ¥åä¸€åˆ‡æ­£å¸¸ï¼Œæˆ‘ä»¬é€‰æ‹©ä¸åŒçš„åå­—å±•ç¤ºç›¸åº”çš„æ•°æ®ã€‚</p>
<p>é‡ç‚¹æ¥äº†ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæŒ‰é’®æ§åˆ¶è¿™ä¸ªç»„ä»¶çš„æ˜¾ç¤ºä¸éšè—ï¼Œä¿®æ”¹åï¼š</p>
<pre><code class="language-js">const App: React.FC = () =&gt; {
  const [show, setShow] = useState(true);
  return (
    &lt;div&gt;
      &lt;button onClick={() =&gt; setShow(!show)}&gt;switch&lt;/button&gt;
      {show &amp;&amp; &lt;Pets /&gt;}
    &lt;/div&gt;
  );
};

render(&lt;App /&gt;, document.getElementById('root'));
</code></pre>
<p>ä¸‹é¢æ‰§è¡Œæ“ä½œï¼š<strong>æ›´æ¢ä¸€ä¸ªåå­—ï¼Œåœ¨ Loading çŠ¶æ€çš„æ—¶å€™ç‚¹å‡»æŒ‰é’®ï¼Œç»„ä»¶æ¶ˆå¤±ï¼Œconsole å¼¹å‡ºè­¦å‘Š</strong></p>
<p>è‡³æ­¤æˆ‘ä»¬å·²ç»å¤ç°å‡ºäº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ç»è¿‡æ¨¡æ‹Ÿæˆ‘ä»¬å‘ç°äº†å¤§æ¦‚çš„é—®é¢˜æ‰€åœ¨ï¼Œå½“æˆ‘ä»¬æ›´æ¢åå­—çš„æ—¶å€™ï¼Œç»„ä»¶å¼€å§‹è¯·æ±‚å¯¹åº”çš„æ•°æ®ï¼Œç„¶åæˆ‘ä»¬ç‚¹å‡»äº†æŒ‰é’®ï¼Œè¿™ä¸ªç»„ä»¶è¢«å¸è½½æ‰äº†ï¼Œä½†æ˜¯ä¸€ç§’åæ•°æ®è¯·æ±‚åˆ°äº†å¹¶ <code>setState</code> æ›´æ–°æ•°æ®ï¼Œæ­¤æ—¶ç»„ä»¶ç¡®å®å¤„äºæ²¡æœ‰æŒ‚è½½çš„çŠ¶æ€ã€‚</p>
<p>æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œè¦ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œåªéœ€è¦åœ¨è¿™ä¸ªç»„ä»¶è¢«å¸è½½çš„æ—¶å€™ï¼Œå–æ¶ˆæ‰æ‰€æœ‰çš„å¯èƒ½åœ¨æœªæ¥æ›´æ”¹çŠ¶æ€çš„æ“ä½œï¼Œè€Œåœ¨ <code>useEffect</code> è¿™ä¸ª hooks ä¸­ï¼Œå…è®¸æˆ‘ä»¬ return ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­æˆ‘ä»¬å¯ä»¥æ”¾å…¥ä¸€äº›æ¸…ç†çš„é€»è¾‘ï¼ŒReact ä¼šåœ¨ç»„ä»¶è¢«å¸è½½çš„æ—¶å€™æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œè€Œåœ¨å½“å‰åº”ç”¨ä¸­æˆ‘ä»¬åªéœ€è¦ä¿è¯ <strong>ç»„ä»¶å¸è½½åä¸ä¼šå†æœ‰ setState</strong></p>
<p>æˆ‘ä»¬æŒ‰ç…§è¿™ä¸ªæ€è·¯ä¿®æ”¹ä¸‹ Pets ç»„ä»¶ï¼š</p>
<p>ä¿®æ”¹ä¸€ä¸‹ useEffect æ–¹æ³•ï¼š</p>
<pre><code class="language-js">useEffect(() =&gt; {
    let mount = true;
    if (pets) {
      getPets(pets).then(res =&gt; {
        if (mount) {
          setLoading(false);
          setPetsData(res);
        }
      });
    }
    return () =&gt; {
      console.log('hahahhaha');
      mount = false;
    };
  }, [pets]);
</code></pre>
<p>å®šä¸€ä¸ªä¸€ä¸ª <code>mount</code> å˜é‡æ§åˆ¶ç»„ä»¶æ˜¯å¦è¢«æŒ‚è½½ï¼Œå¹¶æœ‰æ¡ä»¶çš„è¿›è¡Œæ›´æ–°çŠ¶æ€ã€‚</p>
<p>è¿™ä¸‹é‚£ä¸ªè­¦å‘Šå°±æ¶ˆå¤±äº†ğŸ˜ã€‚</p>
<p>æ€»ç»“ï¼Œåœ¨ <code>useEffect</code> ä¸­è®¢é˜…æŸäº›çŠ¶æ€æˆ–è€…æ‰§è¡ŒæŸäº›å¼‚æ­¥ä»»åŠ¡ï¼Œä¸€å®šè¦æ³¨æ„æ˜¯å¦éœ€è¦åœ¨ç»„ä»¶è¢«å¸è½½çš„æ—¶å€™æ¸…é™¤è¿™äº›æ“ä½œã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[React useCallback]]></title>
        <id>https://baoyuantop.github.io/post/react-usecallback/</id>
        <link href="https://baoyuantop.github.io/post/react-usecallback/">
        </link>
        <updated>2021-07-22T08:58:41.000Z</updated>
        <content type="html"><![CDATA[<p>useCallback æ¥å—ä¸€ä¸ªå‡½æ•°å¹¶è¿”å›å®ƒçš„ <code>memoized</code> ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜è¯¥å‡½æ•°ã€‚</p>
<p>åœ¨ React çš„å‡½æ•°å¼ç»„ä»¶ä¸­ï¼Œæ¯æ¬¡ UI å˜åŒ–è¯¥å‡½æ•°å°±ä¼šé‡æ–°æ‰§è¡Œã€‚æ‰€ä»¥åœ¨å‡½æ•°å¼ç»„ä»¶å†…éƒ¨å®šä¹‰çš„å‡½æ•°æ˜¯ä¸ä¼šé‡å¤åˆ©ç”¨çš„ï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ã€‚åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°åï¼Œåœ¨ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„ç»„ä»¶ä¹Ÿä¼šæ¥å—ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œç›¸å½“äºæ¥å—çš„ <code>props</code> æ›´æ–°äº†ï¼Œ æ‰€ä»¥å°±éœ€è¦é‡æ–°æ¸²æŸ“ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="language-js">const AddButton = () =&gt; {
    const [count, setCount] = useState(0);
    const handleClick = () =&gt; setCount(count + 1);
    return &lt;button onClick={handleClick}&gt;{count}&lt;/button&gt;
}
</code></pre>
<p>åœ¨ button çš„ props ä¸­æˆ‘ä»¬ä¼ å…¥äº† <code>handlkeClick</code>ï¼Œæ¯æ¬¡ UI å˜åŒ–æ—¶ AddButton è¿™ä¸ªç»„ä»¶å°±ä¼šé‡æ–°æ‰§è¡Œä¸€éï¼Œç„¶åé‡æ–°åˆ›å»ºä¸€ä¸ª handleClick å‡½æ•°ï¼Œbutton æ¥å—äº†æ–°çš„ handleClick å‡½æ•°å°±ä¼šé‡æ–°æ¸²æŸ“ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬éœ€è¦ä»…åœ¨ <code>count</code> å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰è¿”å›æ–°çš„ handleClick å‡½æ•°ã€‚è¿™å°±æ˜¯ <code>useCallback</code> çš„ä½œç”¨ã€‚</p>
<p>useCallback çš„å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">useCallback(fn, deps)
</code></pre>
<p>fn ä¸ºæˆ‘ä»¬å®šä¹‰çš„å‡½æ•°ï¼Œdeps ä¸ºä¾èµ–é¡¹æ•°ç»„ï¼Œåªæœ‰å½“è¿™ä¸ªæ•°ç»„ä¸­çš„å˜é‡å˜åŒ–äº†ï¼Œfn æ‰ä¼šè¿”å›æ–°çš„å‡½æ•°ã€‚ä¾èµ–é¡¹æ•°ç»„ç±»ä¼¼äº <code>useEffect</code>ã€‚</p>
<p>useCallback å…¶å®å¹¶æ²¡æœ‰é¿å…é‡å¤åˆ›å»ºå‡½æ•°ï¼Œå› ä¸ºåœ¨ useCallback(fn, [deps]) çš„å½¢å¼ä¸­ï¼Œæ¯æ¬¡è¿è¡Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°ã€‚useCallback åªæ˜¯å¯ä»¥å†³å®šæ˜¯ä¸æ˜¯è¦ä½¿ç”¨æ–°çš„å‡½æ•°ã€‚åœ¨ ä¾èµ–é¡¹ä¸å˜çš„æ—¶å€™ï¼Œå°±å§‹ç»ˆè¿”å›ä¹‹å‰çš„ï¼Œä»è€Œé¿å…ç»„ä»¶çš„é‡å¤æ¸²æŸ“ã€‚</p>
<p>å¦‚æœä½ ç¡®å®šç»„ä»¶é‡å¤æ¸²æŸ“é—®é¢˜ä¸å¤§ï¼Œé‚£ä¹ˆ useCallback ç”¨ä¸ç”¨å°±é—®é¢˜ä¸å¤§ã€‚ä¸è¿‡æœ€ä½³å®è·µæ˜¯ä½¿ç”¨å®ƒå¤„ç†å†…éƒ¨å®šä¹‰çš„å‡½æ•°ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Rust å‡½æ•°]]></title>
        <id>https://baoyuantop.github.io/post/rust-han-shu/</id>
        <link href="https://baoyuantop.github.io/post/rust-han-shu/">
        </link>
        <updated>2021-07-21T14:05:22.000Z</updated>
        <content type="html"><![CDATA[<p>å®šä¹‰ä¸€ä¸ªä¸¤æ•°ç›¸åŠ çš„å‡½æ•°:</p>
<pre><code class="language-rust">fn add(a: u8, b: u8) {
    let sum = a + b;
    println!(&quot;sum is {}&quot;, sum)
}
</code></pre>
<p>å¦‚æœä½ æ²¡æœ‰ä¸ºå˜é‡å£°æ˜ç±»å‹ï¼Œå®ƒä»¬å°†è®¾ç½®ä¸ºä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„å‡½æ•°çš„å‚æ•°ç±»å‹ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹æ•´æ•°çš„æ¨æ–­ç±»å‹ä¸º <code>i32</code>ã€‚</p>
<pre><code class="language-rust">let y = 12;
let z = 34;

add(y, z);
</code></pre>
<p>å› ä¸ºä½¿ç”¨äº† add å‡½æ•°ï¼Œy å’Œ z å°†è¢«æ¨æ–­ä¸º <code>u8</code> ç±»å‹ã€‚å¦‚æœå†å°† y æˆ–è€… z ä¼ å…¥å…¶ä»–ç±»å‹å‚æ•°çš„å‡½æ•°ä¸­ä¼šè§¦å‘ç¨‹åº panicã€‚</p>
<pre><code class="language-rust">fn guess_number(number: i32) {
    println!(&quot;Indeed, {} is the correct answer&quot;, number)
}
</code></pre>
<pre><code class="language-rust">guess_number(z); // éœ€è¦ i32 è€Œä¼ å…¥äº† u8
</code></pre>
<p>éœ€è¦æ˜¾å¼ç±»å‹è½¬æ¢:</p>
<pre><code class="language-rust">guess_number(y as i32);
</code></pre>
<h2 id="å‡½æ•°è¿”å›ç±»å‹">å‡½æ•°è¿”å›ç±»å‹</h2>
<pre><code class="language-rust">// æ¥å—ä¸€ä¸ª i32 ç±»å‹çš„å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª i32 ç±»å‹çš„å€¼
fn square(number: i32) -&gt; i32 {
    number * number
    // è¿”å›å€¼çš„è¡¨è¾¾å¼
    // ç­‰æ•ˆäº return number * number
}
</code></pre>
<p>ä½¿ç”¨å…ƒç»„è¿”å›å¤šä¸ªå€¼ï¼š</p>
<pre><code class="language-rust">fn triple(number: i32) -&gt; (i32, i32) {
    let input = number;
    let result = number * 3;
    (input, result)
}
</code></pre>
<p>æ²¡æœ‰è¿”å›å€¼ï¼ŒæŒ‡å®šè¿”å›å€¼ä¸º () æ˜¯å¯é€‰çš„ã€‚</p>
<pre><code class="language-rust">fn does_not_return() -&gt; () {
    println!(&quot;ain't returning nuthing!&quot;)
}
</code></pre>
<h2 id="é—­åŒ…">é—­åŒ…</h2>
<p>é—­åŒ…å¤§å¤šæ˜¯å¯ä»¥è®¿é—®å°é—­ç¯å¢ƒä¸­çš„å˜é‡çš„åŒ¿åå‡½æ•°ã€‚</p>
<pre><code class="language-rust">let double = |n1: u8| -&gt; u8 { n1 * 2 };
println!(&quot;{}&quot;, double(11)); // 22
</code></pre>
<pre><code class="language-rust">let triple = |n1| n1 * 3;
println!(&quot;{}&quot;, triple(99)); // 297
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å…ƒç»„ç±»å‹]]></title>
        <id>https://baoyuantop.github.io/post/yuan-zu-lei-xing/</id>
        <link href="https://baoyuantop.github.io/post/yuan-zu-lei-xing/">
        </link>
        <updated>2021-07-21T06:18:52.000Z</updated>
        <content type="html"><![CDATA[<p>Tuples (å…ƒç»„) ç±»å‹ ç”¨äºæ··åˆæ•°æ®ç±»å‹ï¼Œæœ€å¤šå¯ä»¥æœ‰ 12 ç§æ··åˆç±»å‹ã€‚</p>
<p>å®šä¹‰å…ƒç»„å¹¶å–å€¼:</p>
<pre><code class="language-rust">let a_tuple: (&amp;str, u8, char) = (&quot;ok&quot;, 0, 'd');
let first_item = a_tuple.0;
println!(&quot;first_item is {}&quot;, first_item); // &quot;ok&quot;
</code></pre>
<p>ä¿®æ”¹å…ƒç»„çš„å€¼ï¼š</p>
<pre><code class="language-rust">let mut b_tuples = (&quot;ok&quot;, 0);
b_tuples.0 = &quot;ko&quot;;
b_tuples.1 += 1;
println!(&quot;b_tuples.0 is {}, b_tuples.1 is {}&quot;, b_tuples.0, b_tuples.1);
</code></pre>
<p>å…ƒç»„çš„è§£æ„èµ‹å€¼:</p>
<pre><code class="language-rust">let c_tuple = (&quot;zh&quot;, &quot;CN&quot;, 1);
let (language, country, code) = c_tuple;
println!(
    &quot;language is: {}, country is: {}, code is: {}&quot;,
    language, country, code
); // language is: en, country is: US, code is: 1
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[React å‡½æ•°å¼ç»„ä»¶çš„è¿”å›å€¼]]></title>
        <id>https://baoyuantop.github.io/post/component-retrun/</id>
        <link href="https://baoyuantop.github.io/post/component-retrun/">
        </link>
        <updated>2021-07-20T08:12:25.000Z</updated>
        <content type="html"><![CDATA[<p>å‡½æ•°å¼ç»„ä»¶æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œæ¥å—å‚æ•°å¹¶è¿”å›ä¸€ä¸ª React å…ƒç´ ã€‚</p>
<p>ä¸€äº›ç‰¹æ®Šçš„è¿”å›å€¼ï¼š</p>
<ul>
<li>æ²¡æœ‰ä»»ä½•è¿”å›ä¼šç›´æ¥å¯¼è‡´é”™è¯¯ï¼Œè¿™åŒ…æ‹¬æ˜¾å¼çš„è¿”å› <code>undefined</code>ï¼Œä¸¤è€…ç­‰ä»·</li>
</ul>
<pre><code class="language-js">import React from 'react';
import { render } from 'react-dom';

const App = () =&gt; {
  return; // ç­‰ä»·äº return undefined;
};

render(&lt;App /&gt;, document.getElementById('root'));
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://z3.ax1x.com/2021/07/22/WBiHRP.png" alt="é”™è¯¯ä¿¡æ¯" loading="lazy"></figure>
<p>é”™è¯¯æç¤ºæˆ‘ä»¬æ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ä¾› renderã€‚</p>
<ul>
<li>å¦‚æœè¿”å›äº† <code>null</code> åˆ™æ˜¯å¯ä»¥æ­£å¸¸æ¸²æŸ“ç©ºç™½é¡µé¢çš„:</li>
</ul>
<pre><code class="language-js">import React from 'react';
import { render } from 'react-dom';

const App = () =&gt; {
  return null;
};

render(&lt;App /&gt;, document.getElementById('root'));
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä»¥ä¸‹ç±»å‹:</p>
<ul>
<li>
<p>ç©ºå­—ç¬¦ä¸²ã€ç©ºæ•°ç»„ã€falseã€è¿”å›ç©ºç™½é¡µé¢ï¼Œä¸æ¸²æŸ“ä»»ä½•å†…å®¹ã€‚</p>
</li>
<li>
<p>1 æˆ–è€… 0 ç›´æ¥æ¸²æŸ“ 1 æˆ– 0;</p>
</li>
<li>
<p>ç©ºå¯¹è±¡å‡ºé”™</p>
</li>
</ul>
<p>é—®é¢˜çš„åŸå› åœ¨äº <code>render(&lt;App /&gt;, document.getElementById('root'));</code>ï¼Œä¹Ÿå°±æ˜¯ react-dom çš„ <code>render</code> æ–¹æ³•ï¼Œå®ƒæ¥å—çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸º <code>React å…ƒç´ ç±»å‹</code>ã€‚</p>
<p>æºç ä¸­çš„å®šä¹‰ä¸º</p>
<pre><code class="language-js">function render(
  element: React$Element&lt;any&gt;,
  container: Container,
  callback: ?Function,
) {};
</code></pre>
<p>å¯ä»¥çœ‹åˆ° element çš„ç±»å‹ä¸º <code>React$Element&lt;any&gt;</code>ï¼Œæ¥æ”¶çš„ä¸ºä¸€ä¸ª React ç»„ä»¶ã€‚</p>
<p>tipsğŸ˜‚: è¿™æ ·åšä¼šæœ‰ç‰¹æ®Šçš„æ•ˆæœ:</p>
<pre><code class="language-js">import React from 'react';
import { render } from 'react-dom';

const App = () =&gt; {
  return &lt;App /&gt;;
};

render(&lt;App /&gt;, document.getElementById('root'));
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Vectors ç±»å‹]]></title>
        <id>https://baoyuantop.github.io/post/vectors-lei-xing/</id>
        <link href="https://baoyuantop.github.io/post/vectors-lei-xing/">
        </link>
        <updated>2021-07-19T13:30:08.000Z</updated>
        <content type="html"><![CDATA[<p>vector æ˜¯ä¸€ä¸ªå…·æœ‰ç›¸åŒç±»å‹çš„æ•°æ®é›†åˆï¼Œå…ƒç´ æŒ‰é¡ºåºæ’åˆ—ã€‚</p>
<p>æ•°ç»„ å…·æœ‰å›ºå®šçš„å¤§å°ï¼Œå¿…é¡»åœ¨ç¼–è¯‘æ—¶ç¡®å®šå¤§å°ï¼Œå› ä¸ºæ•°ç»„å­˜å‚¨åœ¨æ ˆä¸Šã€‚</p>
<p>vector å¯ä»¥åŠ¨æ€çš„è°ƒæ•´å¤§å°ï¼Œé€šè¿‡ <code>adding</code> æˆ– <code>removing</code> å…ƒç´ ã€‚ç›¸å½“äºåŠ¨æ€é•¿åº¦çš„æ•°ç»„ã€‚</p>
<p>vector æ•°æ®å­˜å‚¨åœ¨å †å†…å­˜ä¸­ï¼Œå› æ­¤ä½ éœ€è¦è‡ªå·±å¤„ç† <code>æ‰€æœ‰æƒ</code> å’Œ <code>å€Ÿç”¨</code>ã€‚</p>
<pre><code class="language-rust">let mut letters: Vec&lt;char&gt; = vec!['a', 'b', 'c'];
println!(&quot;letters are {:?}&quot;, letters); // letters are ['a', 'b', 'c']

let first_letter = letters[0];
println!(&quot;first_letter is {}&quot;, first_letter); // first_letter is a
</code></pre>
<p>å‘ vector ä¸­æ·»åŠ æ•°æ®:</p>
<pre><code class="language-rust">letters.push('d');
letters.push('e');
letters.push('f');
println!(&quot;letters are {:?}&quot;, letters); // letters are ['a', 'b', 'c', 'd', 'e', 'f']
</code></pre>
<p>åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ :</p>
<pre><code class="language-rust">letters.pop();
println!(&quot;letters are {:?}&quot;, letters); // letters are ['a', 'b', 'c', 'd', 'e']
</code></pre>
<p>å¯å˜çš„ vectorï¼š</p>
<pre><code class="language-rust">let mut numbers: Vec&lt;i32&gt; = vec![11, 22, 44];
numbers[2] = 33;
println!(&quot;numbers is {}&quot;, numbers[2]); // numbers is 33
</code></pre>
<p>è·å–é•¿åº¦:</p>
<pre><code class="language-rust">let mut ints = vec![22, 33, 44, 55, 66, 77];
let length: usize = ints.len();
println!(&quot;length is {}&quot;, length); // length is 6
</code></pre>
<p>vector åˆ‡ç‰‡:</p>
<pre><code class="language-rust">let mut slice: &amp;[i32] = &amp;ints;
println!(&quot;slice is {:?}&quot;, slice); // slice is [22, 33, 44, 55, 66, 77]
slice = &amp;ints[2..5];
println!(&quot;slice is {:?}&quot;, slice); // slice is [44, 55, 66]
</code></pre>
<p>åŸºäº vector çš„è¿­ä»£:</p>
<pre><code class="language-rust">for it in ints.iter() {
    println!(&quot;it is {}&quot;, it);
}

// it is 22
// it is 33
// it is 44
// it is 55
// it is 66
// it is 77
</code></pre>
<p>åœ¨è¿­ä»£ä¸­ä¿®æ”¹å€¼:</p>
<pre><code class="language-rust">for it in ints.iter_mut() {
    // ä½¿ç”¨å–æ¶ˆå¼•ç”¨æŒ‡é’ˆ (*it) ä»¥è·å–å’Œä¿®æ”¹å€¼
    *it *= *it;
}
println!(&quot;ints is {:?}&quot;, ints); // ints is [484, 1089, 1936, 3025, 4356, 5929]
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[åˆ‡ç‰‡ç±»å‹(slices)]]></title>
        <id>https://baoyuantop.github.io/post/qie-pian-lei-xing-slices/</id>
        <link href="https://baoyuantop.github.io/post/qie-pian-lei-xing-slices/">
        </link>
        <updated>2021-07-13T02:31:08.000Z</updated>
        <summary type="html"><![CDATA[<p><code>åˆ‡ç‰‡ (slice)</code> ç”¨äºå¼•ç”¨ä¸€ä¸ªé›†åˆï¼ˆæ¯”å¦‚æ•°ç»„ã€å­—ç¬¦ä¸²ï¼‰çš„ä¸€æ®µè¿ç»­éƒ¨åˆ†ï¼ˆå­é›†ï¼‰è€Œä¸éœ€è¦æ‹¥æœ‰è¿™äº›å…ƒç´ çš„æ‰€æœ‰æƒã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p><code>åˆ‡ç‰‡ (slice)</code> ç”¨äºå¼•ç”¨ä¸€ä¸ªé›†åˆï¼ˆæ¯”å¦‚æ•°ç»„ã€å­—ç¬¦ä¸²ï¼‰çš„ä¸€æ®µè¿ç»­éƒ¨åˆ†ï¼ˆå­é›†ï¼‰è€Œä¸éœ€è¦æ‹¥æœ‰è¿™äº›å…ƒç´ çš„æ‰€æœ‰æƒã€‚</p>
<!-- more -->
<p>æ¯”è¾ƒå¸¸è§çš„ç”¨æ³•æœ‰ å­—ç¬¦ä¸²åˆ‡ç‰‡ç±»å‹ <code>&amp;str</code>ã€‚</p>
<p>å­—ç¬¦ä¸²å­—é¢é‡æ˜¯ <code>slice</code> ç±»å‹ï¼Œæ•°æ®è¢«ç¡¬ç¼–ç åœ¨å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œç¨‹åºä½¿ç”¨å­—ç¬¦ä¸²åˆ‡ç‰‡æ¥è®¿é—®å®ƒã€‚</p>
<p>å­—ç¬¦ä¸²ç±»å‹çš„å˜é‡æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²æ•°æ®åœ¨å†…å­˜ä¸­èµ·å§‹ä½ç½®çš„æŒ‡é’ˆï¼Œè¡¨ç¤ºæœ‰å…³å­—ç¬¦ä¸²é•¿åº¦å’Œå®¹é‡çš„ä¿¡æ¯ã€‚</p>
<pre><code class="language-rust">let sentence = String::from(&quot;This is a sequence of words.&quot;);
println!(&quot;sentence is {}&quot;, sentence); // sentence is This is a sequence of words.
</code></pre>
<pre><code class="language-rust">let last_word = &amp;sentence[22..22 + 5];
println!(&quot;last_word is \&quot;{}\&quot;&quot;, last_word); // last_word is &quot;words&quot;
</code></pre>
<p><code>last_word</code> å˜é‡æœ‰ä¸€ä¸ªæŒ‡å‘å­—ç¬¦ä¸²æ•°æ®éƒ¨åˆ†çš„  åç§»/èµ·å§‹ ç´¢å¼•çš„æŒ‡é’ˆä»¥åŠåˆ‡ç‰‡é•¿åº¦ã€‚<br>
é€šå¸¸åˆ‡ç‰‡çš„ç»“æŸç´¢å¼•ä¸åŒ…å«åœ¨ç»“æœä¸­ã€‚ï¼ˆä¸åŒ…å«ç¬¬ 5 ä½ï¼‰</p>
<p>ä»èµ·å§‹ä½ç½®åˆ°æœ«å°¾çš„åˆ‡ç‰‡ï¼š</p>
<pre><code class="language-rust">let last_part: &amp;str = &amp;sentence[22..];
println!(&quot;last_part is \&quot;{}\&quot;&quot;, last_part); // last_part is &quot;words.&quot;
</code></pre>
<p>å­—ç¬¦ä¸²åˆ‡ç‰‡çš„é•¿åº¦ä»¥å­—èŠ‚æ•°ä¸ºå•ä½ï¼Œä½¿ç”¨  <code>usize</code> ç±»å‹ã€‚<strong>ä¸æ˜¯å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ•°é‡</strong></p>
<pre><code class="language-rust">let slice_length: usize = last_part.len();
println!(&quot;slice_length is {} bytes&quot;, slice_length); // slice_length is 6 bytes
</code></pre>
<p>å½“ä½¿ç”¨å­—ç¬¦ä¸²åˆ‡ç‰‡ç´¢å¼•å–å€¼çš„æ—¶å€™åº”ç‰¹åˆ«æ³¨æ„ï¼Œ<code>UTF-8</code> ç¼–ç ä¼šå ç”¨ 1 åˆ° 4 å­—èŠ‚ï¼Œè€Œä¸æ˜¯å›ºå®šçš„å­—èŠ‚ã€‚ç´¢å¼•å€¼å¿…é¡»åœ¨å­—ç¬¦çš„è¾¹ç•Œå¤„ï¼Œå¦åˆ™ç¨‹åºä¼š <code>panic</code> ã€‚æ‰€ä»¥åœ¨åˆ›å»ºå­—ç¬¦ä¸²çš„æ—¶å€™è°¨æ…ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦æˆ–æ˜¯è¡¨æƒ…ã€‚</p>
<p>åœ¨ <code>Node.js</code> ä¸­æˆ‘ä»¬æ˜¯ä¸å¤ªä¼šå…³æ³¨è¿™äº›åº•å±‚é—®é¢˜ã€‚</p>
<h2 id="slices-ç±»å‹ä½œä¸ºå‚æ•°">Slices ç±»å‹ä½œä¸ºå‚æ•°</h2>
<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•°ç”¨æ¥è·å–ä¸€å¥è¯çš„ç¬¬ä¸€ä¸ªè¯è¯­ï¼š</p>
<pre><code class="language-rust">fn get_first_word(msg: &amp;String) -&gt; &amp;str {
    // ä»å­—ç¬¦ä¸²è¯­å¥ä¸­åˆ›å»ºä¸€ä¸ªå­—èŠ‚ç±»å‹çš„ slice ï¼ˆ&amp;[u8]ï¼‰
    let bytes: &amp;[u8] = msg.as_bytes();

    // éå†è¿™ä¸ª bytes ï¼Œå¹¶ä½¿ç”¨ enumerate() è·å–æ¯æ¬¡çš„ç´¢å¼•å€¼
    for (index, &amp;item) in bytes.iter().enumerate() {
        // æ‰¾åˆ°ç¬¬ä¸€ä¸ªç©ºæ ¼ï¼Œå¹¶å°†ä¹‹å‰çš„æ‰€æœ‰å†…å®¹ä½œä¸º string slice è¿”å›
        // ä¸€ä¸ªç©ºæ ¼çš„å­—èŠ‚è¡¨ç¤ºä¸º b' '
        // æˆ‘ä»¬æ­£åœ¨è¿­ä»£çš„æ˜¯ å­—èŠ‚ è€Œä¸æ˜¯ å­—ç¬¦ä¸²
        // è¿™æ ·åšæ˜¯å› ä¸º ç´¢å¼•å€¼ æ˜¯å› ä¸ºå­—ç¬¦ä¸²åˆ‡ç‰‡çš„ç´¢å¼•æ˜¯ä»¥ å­—èŠ‚ ä¸ºå•ä½çš„

        if item == b' ' {
            return &amp;msg[..index];
       }
    }
    // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç©ºæ ¼åˆ™è¿”å›å…¨éƒ¨
    &amp;msg
}
</code></pre>
<pre><code class="language-rust">let message = String::from(&quot;lorem ipsum&quot;);

let first_word = get_first_word(&amp;message);
println!(&quot;first_word is \&quot;{}\&quot;&quot;, first_word); // first_word is &quot;lorem&quot;

let first_word_too = get_first_word_too(&amp;message[6..]);
println!(&quot;first_word_too is \&quot;{}\&quot;&quot;, first_word_too); // first_word_too is &quot;ipsum&quot;
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Rust ä¸­çš„æ•°ç»„]]></title>
        <id>https://baoyuantop.github.io/post/rust-zhong-de-shu-zu/</id>
        <link href="https://baoyuantop.github.io/post/rust-zhong-de-shu-zu/">
        </link>
        <updated>2021-07-12T09:44:22.000Z</updated>
        <content type="html"><![CDATA[<p>Rust ä¸­çš„æ•°ç»„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ç±»å‹æ˜¯ä¸€è‡´çš„ã€‚</p>
<p>æ•°ç»„å­˜å‚¨åœ¨å†…å­˜ä¸­ä¸€æ®µè¿ç»­çš„ç©ºé—´å†…ï¼Œ<code>è¿ç»­</code> æ„å‘³ç€ç›¸é‚»å…ƒç´ ä¹‹é—´çš„è·ç¦»ä¸€è‡´ã€‚</p>
<pre><code class="language-rust">let letters = ['a', 'b', 'c']; // letters çš„ç±»å‹ä¸º [char; 3]
let first_letter = letters[0];
println!(&quot;first_letter is {}&quot;, first_letter); // first_letter is a
</code></pre>
<p>å¦‚æœè¦ä¿®æ”¹æ•°ç»„ä¸­çš„æŸä¸ªå…ƒç´ ï¼Œåˆ™æ•°ç»„åˆ›å»ºæ—¶åº”å£°æ˜ä¸º <code>å¯å˜çš„(mut)</code>ã€‚</p>
<pre><code class="language-rust">let mut numbers = [11, 22, 44]; // ç±»å‹ä¸º [i32; 3]
numbers[2] = 33;
println!(&quot;numbers is {}&quot;, numbers[2]); // numbers is 33
</code></pre>
<p>å£°æ˜ä¸€ä¸ªç©ºæ•°ç»„æ—¶ï¼Œåº”æ ‡è¯†ç±»å‹ï¼ˆå…ƒç´ ç±»å‹ã€é•¿åº¦ï¼‰:</p>
<pre><code class="language-rust">let words: [&amp;str; 2]; // æ ‡è¯†æ•°ç»„é•¿åº¦ä¸º 2 ï¼Œå…ƒç´ ç±»å‹ä¸º &amp;str
words = [&quot;ok&quot;; 2]; // é‡å¤è¡¨è¾¾å¼ï¼Œç­‰æ•ˆäº [&quot;ok&quot;, &quot;ok&quot;]
println!(&quot;words is {:?}&quot;, words); // words is [&quot;ok&quot;, &quot;ok&quot;]
</code></pre>
<p><code>usize</code> é•¿åº¦åŸºäºåœ¨ç›®æ ‡æœºå™¨ CPU çš„ä½æ•°ï¼š</p>
<ul>
<li>32 ä½æœºå™¨ä¸º 4 ä½</li>
<li>64 ä½æœºå™¨ä½ 8 ä½</li>
</ul>
<pre><code class="language-rust">let ints = [22; 5];
let length: usize = ints.len();
println!(&quot;length is {}&quot;, length); // length is 5
</code></pre>
<p>ä½¿ç”¨ std crate çš„ <code>men</code> æ¨¡å—æŸ¥çœ‹å†…å­˜å ç”¨å¤§å°</p>
<pre><code class="language-rust">let mem_size_byte = std::mem::size_of_val(&amp;ints);
println!(&quot;mem_size_byte is {}&quot;, mem_size_byte); // mem_size_byte is 20
</code></pre>
<p>è·å–æ•°ç»„åˆ‡ç‰‡</p>
<pre><code class="language-rust">let mut slice: &amp;[i32] = &amp;ints;
println!(&quot;slice is {:?}&quot;, slice); // slice is [22, 22, 22, 22, 22]

slice = &amp;ints[3..5];
println!(&quot;slice is {:?}&quot;, slice); // slice is [22, 22]
</code></pre>
<h2 id="å¤šé˜¶æ•°ç»„">å¤šé˜¶æ•°ç»„</h2>
<pre><code class="language-rust">let d2: [[i32; 3]; 3] = [[9, 8, 7], [6, 5, 4], [3, 2, 1]];
let value = d2[1][0];
println!(&quot;value is {}&quot;, value); // value is 6

let d3: [[[&amp;str; 100]; 20]; 5];
d3 = [[[&quot;ok&quot;; 100]; 20]; 5];
println!(&quot;value d3[3][11][35] is {}&quot;, d3[3][11][35]) // value d3[3][11][35] is ok
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ç®—æ•°è¿ç®—ä¸æ¯”è¾ƒè¿ç®—]]></title>
        <id>https://baoyuantop.github.io/post/suan-shu-yun-suan-yu-bi-jiao-yun-suan/</id>
        <link href="https://baoyuantop.github.io/post/suan-shu-yun-suan-yu-bi-jiao-yun-suan/">
        </link>
        <updated>2021-07-12T02:59:50.000Z</updated>
        <content type="html"><![CDATA[<p>åœ¨ Rust ä¸­åªèƒ½å¯¹ç›¸åŒç±»å‹çš„æ“ä½œæ•°åšç®—æ•°è¿ç®—ã€‚</p>
<p>åŸºæœ¬è¿ç®—:</p>
<pre><code class="language-rust">let a = 11;
let b = 33;
let c = a + b;
println!(&quot;c is {}&quot;, c); // c is 44
let d = c - b;
println!(&quot;d is {}&quot;, d); // d is 11
let e = a * d;
println!(&quot;e is {}&quot;, e); // e is 121
</code></pre>
<p>ä½¿ç”¨ <code>as</code> è¿›è¡Œç±»å‹è½¬æ¢ï¼Œéœ€è¦æ³¨æ„ç²¾åº¦æŸå¤±å’Œå…¼å®¹æ€§é—®é¢˜ã€‚</p>
<pre><code class="language-rust">let f = c as f32 / 4.5;
println!(&quot;f is {}&quot;, f); // f is 9.777778
</code></pre>
<p>ä¼˜å…ˆçº§æ§åˆ¶</p>
<pre><code class="language-rust">let g = 43.5432 % (a as f64 * e as f64);
println!(&quot;g is {}&quot;, g); // g is 43.5432
</code></pre>
<p>åŒæ ·çš„åšæ¯”è¾ƒè¿ç®—åªèƒ½å¯¹ç›¸åŒç±»å‹çš„è¿›è¡Œæ¯”è¾ƒ</p>
<pre><code class="language-rust">let a = 11;
let b = 88;
</code></pre>
<pre><code class="language-rust">println!(&quot;a EQUAL TO b is {}&quot;, a == b); // a EQUAL TO b is false

println!(&quot;a NOT EQUAL TO b is {}&quot;, a != b); // a NOT EQUAL TO b is true

println!(&quot;a GREATER THAN b is {}&quot;, a &gt; b); // a GREATER THAN b is false

println!(&quot;a GREATER THAN OR EQUAL TO b is {}&quot;, a &gt;= b); // a GREATER THAN OR EQUAL TO b is false

println!(&quot;a LESS THAN b is {}&quot;, a &lt; b); // a LESS THAN b is true

println!(&quot;a LESS THAN OR EQUAL TO b is {}&quot;, a &lt;= b); // a LESS THAN OR EQUAL TO b is true
</code></pre>
<pre><code class="language-rust">let c = true;
let d = false;

println!(&quot;c GREATER THAN d is {}&quot;, c &gt; d); // c GREATER THAN d is true
println!(&quot;c GREATER THAN OR EQUAL TO d is {}&quot;, c &gt;= d); // c GREATER THAN OR EQUAL TO d is true
</code></pre>
<p><strong>ç¤ºä¾‹ï¼šè®¡ç®—å¹³å‡å€¼</strong></p>
<pre><code class="language-rust">fn main() {
    let a = 33;
    let b = 4.9;
    let c: f32 = 123.5;
    let average = (a as f32 + b as f32 + c) / 3.0;
    println!(&quot;average is {}&quot;, average);
    assert_eq!(average, 53.8);
    println!(&quot;test passed.&quot;);
}
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="language-rust">average is 53.8
test passed.
</code></pre>
]]></content>
    </entry>
</feed>